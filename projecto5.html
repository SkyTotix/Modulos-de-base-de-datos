<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Base de Datos - Datos a través del Tiempo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .entity {
            background-color: white;
            border: 2px solid #4a5568; /* slate-700 */
            border-radius: 0.5rem;
            padding: 0.75rem;
            position: absolute;
            width: 240px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
        }
        .entity-title {
            font-weight: 700;
            color: #1e3a8a; /* blue-900 */
            text-align: center;
            border-bottom: 1px solid #cbd5e1; /* slate-300 */
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .entity-attributes {
            font-size: 0.875rem;
            color: #334155; /* slate-700 */
        }
        .entity-attributes li {
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-900">Seguimiento de Datos a través del Tiempo</h1>
            <p class="mt-2 text-lg text-gray-600">Modelado de Datos Históricos y Restricciones Temporales</p>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Task 1: Historical Grades -->
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-800 mb-3">Tarea 1: Seguimiento de Calificaciones Históricas</h2>
                <p class="text-gray-700 mb-3">
                    El escenario requiere que la base de datos almacene un registro de todas las calificaciones que un estudiante ha obtenido en un curso, incluso si lo vuelve a tomar. El modelo actual solo permite una calificación, que se sobrescribiría.
                </p>
                <div class="p-4 border border-gray-200 rounded-lg bg-gray-50">
                    <h3 class="font-semibold text-lg text-gray-900">Solución Propuesta</h3>
                    <p class="mt-2 text-gray-700">
                        Para resolver esto, se introduce una nueva entidad llamada <span class="font-mono bg-gray-200 px-1 rounded">GRADE HISTORY</span>. Esta entidad almacenará cada calificación anterior junto con la fecha en que se registró.
                    </p>
                     <ul class="list-disc list-inside mt-2 text-gray-600 space-y-1">
                        <li>La entidad <span class="font-mono bg-gray-200 px-1 rounded">STUDENT COURSE DETAIL</span> mantendrá la <strong>calificación actual</strong>.</li>
                        <li>La nueva entidad <span class="font-mono bg-gray-200 px-1 rounded">GRADE HISTORY</span> tendrá una relación con <span class="font-mono bg-gray-200 px-1 rounded">STUDENT COURSE DETAIL</span> para registrar todas las <strong>calificaciones pasadas</strong>.</li>
                    </ul>
                </div>
                 <div class="mt-4">
                    <h3 class="text-xl font-semibold text-blue-800 mb-3">Diagrama ERD Modificado</h3>
                    <div class="w-full overflow-x-auto bg-slate-50 p-8 rounded-lg border flex justify-center items-center">
                        <div class="relative h-[400px] w-full max-w-3xl">
                            <!-- SVG Layer for Connectors -->
                            <svg class="absolute top-0 left-0 w-full h-full" style="z-index: 1;">
                                <defs>
                                    <marker id="crowsfoot-history" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L12,6 L0,12" stroke="#4a5568" stroke-width="2" fill="none"/>
                                    </marker>
                                </defs>
                                <!-- Line connecting STUDENT COURSE DETAIL and GRADE HISTORY -->
                                <line x1="240" y1="200" x2="400" y2="200" stroke="#4a5568" stroke-width="2" marker-end="url(#crowsfoot-history)"></line>
                            </svg>
    
                            <!-- Entities -->
                            <div class="entity" style="top: 100px; left: 0px; height: 200px;">
                                <div class="entity-title">STUDENT COURSE DETAIL</div>
                                <ul class="entity-attributes">
                                    <li># Course ID</li>
                                    <li># Student ID</li>
                                    <li>* Grade (Current)</li>
                                </ul>
                            </div>
                            
                            <div class="entity" style="top: 100px; left: 400px; height: 200px;">
                                <div class="entity-title">GRADE HISTORY</div>
                                <ul class="entity-attributes">
                                    <li># Course ID</li>
                                    <li># Student ID</li>
                                    <li># Date Recorded</li>
                                    <li>* Previous Grade</li>
                                </ul>
                            </div>
    
                            <!-- Relationship Text -->
                            <div class="absolute text-sm bg-slate-50 px-1" style="top: 170px; left: 280px; z-index: 2;">contiene historial de</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Task 2: Classroom Assignments -->
            <div class="card">
                <h2 class="text-2xl font-semibold text-blue-800 mb-3">Tarea 2: Análisis del Diagrama de Asignaciones</h2>
                <div class="space-y-4">
                    <div>
                        <h3 class="font-semibold text-lg text-gray-900">a. ¿Por qué "Start Time" es parte del UID de ASSIGNMENT?</h3>
                        <p class="mt-1 text-gray-700">
                            El atributo <span class="font-mono bg-gray-200 px-1 rounded">Start Time</span> (Hora de Inicio) es parte del Identificador Único (UID) junto con <span class="font-mono bg-gray-200 px-1 rounded">Date of Exam</span> (Fecha de Examen) para garantizar que cada asignación de examen sea única. La fecha por sí sola no es suficiente, ya que <strong>un mismo examen podría ofrecerse en diferentes horarios durante el mismo día</strong> (por ejemplo, una sesión a las 9:00 AM y otra a las 2:00 PM). La combinación de fecha y hora de inicio asegura que cada bloque de tiempo para un examen sea un registro único e inconfundible en la base de datos.
                        </p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-lg text-gray-900">b. Tres restricciones relacionadas con el tiempo</h3>
                        <p class="mt-1 text-gray-700">
                           A continuación se presentan tres ejemplos de restricciones de negocio que se aplicarían a este modelo:
                        </p>
                        <ol class="list-decimal list-inside mt-2 text-gray-700 space-y-2">
                            <li>
                                <strong>La hora de fin debe ser posterior a la hora de inicio.</strong>
                                <br>
                                <span class="text-sm text-gray-500">Un examen no puede terminar antes de que comience. Esta es una regla fundamental de integridad de datos. No representa no-transferibilidad condicional.</span>
                            </li>
                            <li>
                                <strong>No se puede asignar el mismo salón de clases a dos exámenes diferentes al mismo tiempo.</strong>
                                <br>
                                <span class="text-sm text-gray-500">Para un <span class="font-mono bg-gray-200 px-1 rounded">CLASS ROOM</span> y una <span class="font-mono bg-gray-200 px-1 rounded">Date of Exam</span> dados, los rangos de tiempo (de <span class="font-mono bg-gray-200 px-1 rounded">Start Time</span> a <span class="font-mono bg-gray-200 px-1 rounded">End Time</span>) de las asignaciones no pueden superponerse. Esta restricción <strong>representa no-transferibilidad condicional</strong>, porque una vez que un horario está reservado para un examen en un salón, ese bloque de tiempo no puede ser "transferido" a otro examen en el mismo salón.</span>
                            </li>
                             <li>
                                <strong>La fecha de un examen (<span class="font-mono bg-gray-200 px-1 rounded">Date of Exam</span>) no puede ser una fecha pasada al momento de crear una nueva asignación.</strong>
                                <br>
                                <span class="text-sm text-gray-500">El sistema debe impedir que se programen nuevos exámenes en fechas que ya han ocurrido. Esta es una regla de negocio para asegurar que solo se gestionen eventos futuros. No representa no-transferibilidad condicional.</span>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>

        </main>

        <!-- Footer -->
        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>Desarrollo de Bases de Datos - Propuesta para Oracle Baseball League</p>
            <p>&copy; 2024 Gemini Consulting Services</p>
        </footer>

    </div>

</body>
</html>
